<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/css?family=VT323&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
        <link href="/css/console.css" rel="stylesheet" type="text/css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
    </head>
    <body>
        
        <div class="console-wrapper">
            <h1>Server Console</h1>
            <div class="console" id="console">
                <!-- LINES GENERATED BY JS -->
                <div id="bar">
                    <div id="input">
                        <span>$ eval(</span>
                        <span id="code" contentEditable="true">console.log('I logged something')</span>
                        <span>)</span>
                    </div>
                </div>
            </div>
        </div>
        <script>
        
            let code = document.getElementById('code');
            
            document.addEventListener('keydown', (key) => {
               
               if(key.code === 'Enter' && key.shiftKey !== true) {
                   key.preventDefault();
                   
                   console.log('sent');
               }
               
               
                
                
            });
            
            let socket = io.connect('http://'+window.location.host);
            
            socket.on('log', (log) => {

                let cnsol = document.getElementById('console');

                let line = document.createElement('p');
                    line.innerText = log.msg;
                    line.style.color = log.color;
                
                cnsol.appendChild(line);

            });

        </script>
    </body>
</html>